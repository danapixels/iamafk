version: '3.8'

services:
client:
build:
context: ./client
dockerfile: Dockerfile
args:
- VITE_SERVER_URL=ws://143.198.27.234
ports:
- "80:80"
depends_on:
- server
environment:
- VITE_SERVER_URL=ws://143.198.27.234
networks:
- iamafk-network
restart: unless-stopped

server:
build:
context: ./server
dockerfile: Dockerfile
ports:
- "3001:3001"
volumes:
- server-data:/app/data
environment:
- NODE_ENV=production
- PORT=3001
- CORS_ORIGIN=http://143.198.27.234
networks:
- iamafk-network
restart: unless-stopped

volumes:
server-data:
driver: local

networks:
iamafk-network:
driver: bridge 